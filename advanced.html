<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Write a Custom Device Plugin (Advanced) &mdash; navigate 0.0.6 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Add a New Hardware Device (Advanced)" href="add_new_device.html" />
    <link rel="prev" title="Write A Smart Acquisition Routine (Intermediate)" href="intermediate.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            navigate
              <img src="_static/mic.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quick_start.html">Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="software_installation.html">Software Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="i_want_to.html">I Want To…</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="beginner.html">Acquire an Image (Beginner)</a></li>
<li class="toctree-l2"><a class="reference internal" href="intermediate.html">Write A Smart Acquisition Routine (Intermediate)</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Write a Custom Device Plugin (Advanced)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#initial-steps">Initial Steps</a></li>
<li class="toctree-l3"><a class="reference internal" href="#model-code">Model Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="#view-code">View Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="#controller-code">Controller Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plugin-configuration">Plugin Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="add_new_device.html">Add a New Hardware Device (Advanced)</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="user_guide/hardware/hardware_home.html">Supported Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_guide/file_formats.html">Supported File Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_guide/gui_walkthrough.html">User Interface Walkthrough</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_guide/setup_microscope.html">Setting Up A Microscope</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_guide/acquiring_home.html">Acquiring Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_guide/case_studies/case_studies_home.html">Case Studies</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contributing/software_architecture.html">Software Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing/contributing_guidelines.html">Contributing Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing/feature_container.html">Feature Container</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_guide/restapi.html">REST-API</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugin/plugin_home.html">Plugin Architecture</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Plugins</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/TheDeanLab/navigate-plugin-template">navigate Plugin Template</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/TheDeanLab/navigate-confocal-projection">navigate Confocal Projection Plugin</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/TheDeanLab/navigate-at-scale">navigate at Scale</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/TheDeanLab/navigate-mmcore-plugin">navigate MMCore Plugin</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/TheDeanLab/navigate-ilastik-server">navigate ilastik Server</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="implementations/implementations.html">Implemented Microscopes</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">Software API</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">navigate</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="i_want_to.html">I Want To…</a></li>
      <li class="breadcrumb-item active">Write a Custom Device Plugin (Advanced)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/advanced.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="write-a-custom-device-plugin-advanced">
<h1>Write a Custom Device Plugin (Advanced)<a class="headerlink" href="#write-a-custom-device-plugin-advanced" title="Permalink to this heading"></a></h1>
<p><strong>navigate</strong>’s <a class="reference internal" href="plugin/plugin_home.html"><span class="doc">plugin system</span></a> enables users to
easily incorporate new devices and integrate new features and acquisition modes. In
this guide, we will add a new device type, titled <code class="docutils literal notranslate"><span class="pre">CustomDevice</span></code>, and a dedicated GUI
window to control it. This hypothetical <code class="docutils literal notranslate"><span class="pre">CustomDevice</span></code> is capable of moving a certain
distance, rotating a specified number of degrees, and applying a force to halt its
movement.</p>
<p><strong>navigate</strong> plugins are implemented using a Model-View-Controller architecture. The
model contains the device-specific code, the view contains the GUI code, and the
controller contains the code that communicates between the model and the view.</p>
<hr class="docutils" />
<section id="initial-steps">
<h2>Initial Steps<a class="headerlink" href="#initial-steps" title="Permalink to this heading"></a></h2>
<p>To ease the addition of a new plugin, we have created a template plugin that can be
used as a starting point.</p>
<ul class="simple">
<li><p>Go to <a class="reference external" href="https://github.com/TheDeanLab/navigate-plugin-template">navigate-plugin-template</a>.</p></li>
<li><p>In the upper right, click “Use this template” and then “Create a new repository”.</p></li>
<li><p>In this repository, rename the <code class="docutils literal notranslate"><span class="pre">plugin_device</span></code> folder to <code class="docutils literal notranslate"><span class="pre">custom_device</span></code>.</p></li>
<li><p>Rename the file <code class="docutils literal notranslate"><span class="pre">plugin_device.py</span></code> to <code class="docutils literal notranslate"><span class="pre">custom_device.py</span></code>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="model-code">
<h2>Model Code<a class="headerlink" href="#model-code" title="Permalink to this heading"></a></h2>
<p>Create a new custom device using the following code.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">CustomDevice</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; A Custom Device Class &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device_connection</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Initialize the Custom Device</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        device_connection : object</span>
<span class="sd">            The device connection object</span>
<span class="sd">        args : list</span>
<span class="sd">            The arguments for the device</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">device_connection</span> <span class="o">=</span> <span class="n">device_connection</span>

    <span class="k">def</span> <span class="nf">move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_size</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Move the Custom Device</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        step_size : float</span>
<span class="sd">            The step size of the movement. Default is 1.0 micron.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;*** Custom Device is moving by&quot;</span><span class="p">,</span> <span class="n">step_size</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Stop the Custom Device &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;*** Stopping the Custom Device!&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">turn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="o">=</span><span class="mf">0.1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Turn the Custom Device</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        angle : float</span>
<span class="sd">            The angle of the rotation. Default is 0.1 degree.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;*** Custom Device is turning by&quot;</span><span class="p">,</span> <span class="n">angle</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">commands</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Return the commands for the Custom Device</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        dict</span>
<span class="sd">            The commands for the Custom Device</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;move_custom_device&quot;</span><span class="p">:</span> <span class="k">lambda</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
            <span class="s2">&quot;stop_custom_device&quot;</span><span class="p">:</span> <span class="k">lambda</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">(),</span>
            <span class="s2">&quot;rotate_custom_device&quot;</span><span class="p">:</span> <span class="k">lambda</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
        <span class="p">}</span>
</pre></div>
</div>
<p>All devices should be accompanied by synthetic versions, which enables the software
to run without the hardware connected. Thus, in a manner that is similar to the
<code class="docutils literal notranslate"><span class="pre">CustomDevice</span></code> class, we edit the code in <code class="docutils literal notranslate"><span class="pre">synthetic_device.py</span></code>, albeit without
any calls to the device itself.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">SyntheticCustomDevice</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; A Synthetic Device Class &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device_connection</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Initialize the Synthetic Device</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        device_connection : object</span>
<span class="sd">            The device connection object</span>
<span class="sd">        args : list</span>
<span class="sd">            The arguments for the device</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_size</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Move the Synthetic Device</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        step_size : float</span>
<span class="sd">            The step size of the movement. Default is 1.0 micron.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;*** Synthetic Device receive command: move&quot;</span><span class="p">,</span> <span class="n">step_size</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Stop the Synthetic Device &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;*** Synthetic Device receive command: stop&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">rotate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="o">=</span><span class="mf">0.1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Turn the Synthetic Device</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        angle : float</span>
<span class="sd">            The angle of the rotation. Default is 0.1 degree.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;*** Synthetic Device receive command: turn&quot;</span><span class="p">,</span> <span class="n">angle</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">commands</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Return the commands for the Synthetic Device.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        dict</span>
<span class="sd">            The commands for the Synthetic Device</span>
<span class="sd">         &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;move_custom_device&quot;</span><span class="p">:</span> <span class="k">lambda</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
            <span class="s2">&quot;stop_custom_device&quot;</span><span class="p">:</span> <span class="k">lambda</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">(),</span>
            <span class="s2">&quot;rotate_custom_device&quot;</span><span class="p">:</span> <span class="k">lambda</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
        <span class="p">}</span>
</pre></div>
</div>
<p>Edit <code class="docutils literal notranslate"><span class="pre">device_startup_functions.py</span></code> to tell <strong>navigate</strong> how to connect to and start
the <code class="docutils literal notranslate"><span class="pre">CustomDevice</span></code>. This is the portion of the code that actually makes a connection
to the hardware. <code class="docutils literal notranslate"><span class="pre">load_device()</span></code> should return an object that can control the
hardware.</p>
<p><strong>navigate</strong> establishes communication with each device independently, and passes the
instance of that device to class that controls it (e.g., in this case, the
<cite>CustomDevice</cite> class). This allows <strong>navigate</strong> to be initialized with multiple
microscope <span class="xref std std-ref">configurations</span>,
some of which may share devices.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Standard library imports</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="c1"># Third party imports</span>

<span class="c1"># Local application imports</span>
<span class="kn">from</span> <span class="nn">navigate.tools.common_functions</span> <span class="kn">import</span> <span class="n">load_module_from_file</span>
<span class="kn">from</span> <span class="nn">navigate.model.device_startup_functions</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">auto_redial</span><span class="p">,</span>
    <span class="n">device_not_found</span><span class="p">,</span>
    <span class="n">DummyDeviceConnection</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">DEVICE_TYPE_NAME</span> <span class="o">=</span> <span class="s2">&quot;custom_device&quot;</span>
<span class="n">DEVICE_REF_LIST</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">load_device</span><span class="p">(</span><span class="n">configuration</span><span class="p">,</span> <span class="n">is_synthetic</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Load the Custom Device</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    configuration : dict</span>
<span class="sd">        The configuration for the Custom Device</span>
<span class="sd">    is_synthetic : bool</span>
<span class="sd">        Whether the device is synthetic or not. Default is False.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    object</span>
<span class="sd">        The Custom Device object</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">DummyDeviceConnection</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">start_device</span><span class="p">(</span><span class="n">microscope_name</span><span class="p">,</span> <span class="n">device_connection</span><span class="p">,</span> <span class="n">configuration</span><span class="p">,</span> <span class="n">is_synthetic</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Start the Custom Device</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    microscope_name : str</span>
<span class="sd">        The name of the microscope</span>
<span class="sd">    device_connection : object</span>
<span class="sd">        The device connection object</span>
<span class="sd">    configuration : dict</span>
<span class="sd">        The configuration for the Custom Device</span>
<span class="sd">    is_synthetic : bool</span>
<span class="sd">        Whether the device is synthetic or not. Default is False.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    object</span>
<span class="sd">        The Custom Device object</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">is_synthetic</span><span class="p">:</span>
        <span class="n">device_type</span> <span class="o">=</span> <span class="s2">&quot;synthetic&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">device_type</span> <span class="o">=</span> <span class="n">configuration</span><span class="p">[</span><span class="s2">&quot;configuration&quot;</span><span class="p">][</span><span class="s2">&quot;microscopes&quot;</span><span class="p">][</span><span class="n">microscope_name</span><span class="p">][</span>
            <span class="s2">&quot;custom_device&quot;</span>
        <span class="p">][</span><span class="s2">&quot;hardware&quot;</span><span class="p">][</span><span class="s2">&quot;type&quot;</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">device_type</span> <span class="o">==</span> <span class="s2">&quot;CustomDevice&quot;</span><span class="p">:</span>
        <span class="n">custom_device</span> <span class="o">=</span> <span class="n">load_module_from_file</span><span class="p">(</span>
            <span class="s2">&quot;custom_device&quot;</span><span class="p">,</span>
            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;custom_device.py&quot;</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">custom_device</span><span class="o">.</span><span class="n">CustomDevice</span><span class="p">(</span>
            <span class="n">microscope_name</span><span class="p">,</span> <span class="n">device_connection</span><span class="p">,</span> <span class="n">configuration</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="n">device_type</span> <span class="o">==</span> <span class="s2">&quot;synthetic&quot;</span><span class="p">:</span>
        <span class="n">synthetic_device</span> <span class="o">=</span> <span class="n">load_module_from_file</span><span class="p">(</span>
            <span class="s2">&quot;custom_synthetic_device&quot;</span><span class="p">,</span>
            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;synthetic_device.py&quot;</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">synthetic_device</span><span class="o">.</span><span class="n">SyntheticDevice</span><span class="p">(</span>
            <span class="n">microscope_name</span><span class="p">,</span> <span class="n">device_connection</span><span class="p">,</span> <span class="n">configuration</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">device_not_found</span><span class="p">(</span><span class="n">microscope_name</span><span class="p">,</span> <span class="n">device_type</span><span class="p">)</span>
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="view-code">
<h2>View Code<a class="headerlink" href="#view-code" title="Permalink to this heading"></a></h2>
<p>To add a GUI control window, go to the <code class="docutils literal notranslate"><span class="pre">view</span></code> folder, rename <code class="docutils literal notranslate"><span class="pre">plugin_name_frame.py</span></code>
to <code class="docutils literal notranslate"><span class="pre">custom_device_frame.py</span></code>, and edit the code as follows.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Standard library imports</span>
<span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="nn">tk</span>
<span class="kn">from</span> <span class="nn">tkinter</span> <span class="kn">import</span> <span class="n">ttk</span>

<span class="c1"># Third party imports</span>

<span class="c1"># Local application imports</span>
<span class="kn">from</span> <span class="nn">navigate.view.custom_widgets.LabelInputWidgetFactory</span> <span class="kn">import</span> <span class="n">LabelInput</span>


<span class="k">class</span> <span class="nc">CustomDeviceFrame</span><span class="p">(</span><span class="n">ttk</span><span class="o">.</span><span class="n">Frame</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; The Custom Device Frame &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Initialize the Custom Device Frame</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        root : object</span>
<span class="sd">            The root Tk object</span>
<span class="sd">        args : list</span>
<span class="sd">            The arguments for the Custom Device Frame</span>
<span class="sd">        kwargs : dict</span>
<span class="sd">            The keyword arguments for the Custom Device Frame</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ttk</span><span class="o">.</span><span class="n">Frame</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="c1"># Formatting</span>
        <span class="n">tk</span><span class="o">.</span><span class="n">Grid</span><span class="o">.</span><span class="n">columnconfigure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;all&quot;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">tk</span><span class="o">.</span><span class="n">Grid</span><span class="o">.</span><span class="n">rowconfigure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;all&quot;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Dictionary for widgets and buttons</span>
        <span class="c1">#: dict: Dictionary of the widgets in the frame</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s2">&quot;step_size&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">LabelInput</span><span class="p">(</span>
            <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Step Size&quot;</span><span class="p">,</span>
            <span class="n">label_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;padding&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">)},</span>
            <span class="n">input_class</span><span class="o">=</span><span class="n">ttk</span><span class="o">.</span><span class="n">Entry</span><span class="p">,</span>
            <span class="n">input_var</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">DoubleVar</span><span class="p">(),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s2">&quot;step_size&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s2">&quot;N&quot;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s2">&quot;step_size&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">sticky</span><span class="o">=</span><span class="s2">&quot;N&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s2">&quot;angle&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">LabelInput</span><span class="p">(</span>
            <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Angle&quot;</span><span class="p">,</span>
            <span class="n">label_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;padding&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">0</span><span class="p">)},</span>
            <span class="n">input_class</span><span class="o">=</span><span class="n">ttk</span><span class="o">.</span><span class="n">Entry</span><span class="p">,</span>
            <span class="n">input_var</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">DoubleVar</span><span class="p">(),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s2">&quot;angle&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s2">&quot;N&quot;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s2">&quot;angle&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">sticky</span><span class="o">=</span><span class="s2">&quot;N&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="s2">&quot;move&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;MOVE&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="s2">&quot;rotate&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;ROTATE&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="s2">&quot;stop&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;STOP&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="s2">&quot;move&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s2">&quot;N&quot;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="s2">&quot;rotate&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s2">&quot;N&quot;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="s2">&quot;stop&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s2">&quot;N&quot;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>

    <span class="c1"># Getters</span>
    <span class="k">def</span> <span class="nf">get_variables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">variables</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">widget</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">variables</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">get_variable</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">variables</span>

    <span class="k">def</span> <span class="nf">get_widgets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>navigate</strong> comes equipped with a large number of validated widgets,
which prevent users from entering invalid values that can crash the program or
result in undesirable outcomes. It is highly recommended that you use these,
which include the following:</p>
<blockquote>
<div><ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">LabelInput</span></code> widget conveniently combines a label and an input widget
into a single object. It is used to create the <code class="docutils literal notranslate"><span class="pre">step_size</span></code> and <code class="docutils literal notranslate"><span class="pre">angle</span></code>
widgets in the code above.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">LabelInput</span></code> widget can accept multiple types of <code class="docutils literal notranslate"><span class="pre">input_class</span></code> objects,
which can include standard tkinter widgets (e.g., spinbox, entry, etc.) or
custom widgets. In this example, we use the <code class="docutils literal notranslate"><span class="pre">ttk.Entry</span></code> widget.</p></li>
<li><p>Other examples of validated widgets include a <code class="docutils literal notranslate"><span class="pre">ValidatedSpinbox</span></code>,
<code class="docutils literal notranslate"><span class="pre">ValidatedEntry</span></code>, <code class="docutils literal notranslate"><span class="pre">ValidatedCombobox</span></code>, and <code class="docutils literal notranslate"><span class="pre">ValidatedMixin</span></code>.</p></li>
<li><p>Please see the <a class="reference internal" href="_autosummary/navigate.view.custom_widgets.html#module-navigate.view.custom_widgets" title="navigate.view.custom_widgets"><code class="xref any py py-mod docutils literal notranslate"><span class="pre">navigate.view.custom_widgets</span></code></a> module for more details.</p></li>
</ul>
</div></blockquote>
</div>
</section>
<hr class="docutils" />
<section id="controller-code">
<h2>Controller Code<a class="headerlink" href="#controller-code" title="Permalink to this heading"></a></h2>
<p>Now, let’s build a controller. Open the <code class="docutils literal notranslate"><span class="pre">controller</span></code> folder, rename
<code class="docutils literal notranslate"><span class="pre">plugin_name_controller.py</span></code> to <code class="docutils literal notranslate"><span class="pre">custom_device_controller.py</span></code>, and edit the code
as follows.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Standard library imports</span>
<span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="nn">tk</span>

<span class="c1"># Third party imports</span>

<span class="c1"># Local application imports</span>
<span class="kn">from</span> <span class="nn">navigate.controller.sub_controllers.gui_controller</span> <span class="kn">import</span> <span class="n">GUIController</span>


<span class="k">class</span> <span class="nc">CustomDeviceController</span><span class="p">(</span><span class="n">GUIController</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; The Custom Device Controller &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">parent_controller</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Initialize the Custom Device Controller</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        view : object</span>
<span class="sd">            The Custom Device View object</span>
<span class="sd">        parent_controller : object</span>
<span class="sd">            The parent (e.g., main) controller object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="n">parent_controller</span><span class="p">)</span>

        <span class="c1"># Get the variables and buttons from the view</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variables</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">get_variables</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">buttons</span>

        <span class="c1"># Set the trace commands for the variables associated with the widgets in the View.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="s2">&quot;move&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">move_device</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="s2">&quot;rotate&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">rotate_device</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="s2">&quot;stop&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">stop_device</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">move_device</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Listen to the move button and move the Custom Device upon clicking.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        args : list</span>
<span class="sd">            The arguments for the move_device function. Should be included as the tkinter event</span>
<span class="sd">            is passed to this function.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent_controller</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="s2">&quot;move_custom_device&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="s2">&quot;step_size&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">rotate_device</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Listen to the rotate button and rotate the Custom Device upon clicking.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        args : list</span>
<span class="sd">            The arguments for the rotate_device function. Should be included as the tkinter event</span>
<span class="sd">            is passed to this function.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent_controller</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="s2">&quot;rotate_custom_device&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="s2">&quot;angle&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">stop_device</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Listen to the stop button and stop the Custom Device upon clicking.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        args : list</span>
<span class="sd">            The arguments for the stop_device function. Should be included as the tkinter event</span>
<span class="sd">            is passed to this function.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent_controller</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;stop_custom_device&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>In each case above, the sub-controller for the <code class="docutils literal notranslate"><span class="pre">custom-device</span></code> establishes what
actions should take place once a button in the view is clicked. In this case, the
methods <code class="docutils literal notranslate"><span class="pre">move_device</span></code>, <code class="docutils literal notranslate"><span class="pre">rotate_device</span></code>, and <code class="docutils literal notranslate"><span class="pre">stop_device</span></code>. This triggers a sequence
of events:</p>
<blockquote>
<div><ul class="simple">
<li><p>The sub-controller passes the command to the parent controller, which is the
main controller for the software.</p></li>
<li><p>The parent controller passes the command to the model, which is operating in
its own sub-process, using an event queue. This eliminates the need for the
controller to know anything about the model and prevents race conditions.</p></li>
<li><p>The model then executes command, and any updates to the controller from the
model are relayed using another event queue.</p></li>
</ul>
</div></blockquote>
</section>
<hr class="docutils" />
<section id="plugin-configuration">
<h2>Plugin Configuration<a class="headerlink" href="#plugin-configuration" title="Permalink to this heading"></a></h2>
<p>Next, update the <code class="docutils literal notranslate"><span class="pre">plugin_config.yml</span></code> file as follows:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Custom Device</span>
<span class="nt">view</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Popup</span>
</pre></div>
</div>
<p>Remove the folder <code class="docutils literal notranslate"><span class="pre">./model/features</span></code>, the file <code class="docutils literal notranslate"><span class="pre">feature_list.py</span></code>, and
the file <code class="docutils literal notranslate"><span class="pre">plugin_acquisition_mode.py</span></code>. The plugin folder structure is as follows.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>custom_device/
    ├── controller/
    │   └── custom_device_controller.py
    |
    ├── model/
    |   └── devices/
    │       └── custom_device/
    │           ├── device_startup_functions.py
    │           ├── custom_device.py
    │           └── synthetic_device.py
    ├── view/
    |   └── custom_device_frame.py
    │
    └── plugin_config.yml
</pre></div>
</div>
<dl class="simple">
<dt>Install the plugin using one of two methods:</dt><dd><ul class="simple">
<li><p>Install a plugin by putting the whole plugin folder directly into
<code class="docutils literal notranslate"><span class="pre">navigate/plugins/</span></code>. In this example, put <code class="docutils literal notranslate"><span class="pre">custom_device</span></code> folder
and all its contents into <code class="docutils literal notranslate"><span class="pre">navigate/plugins</span></code>.</p></li>
<li><p>Alernatively, install this plugin through the menu
<span class="menuselection">Plugins ‣ Install Plugin</span> by selecting the plugin folder.</p></li>
</ul>
</dd>
</dl>
<p>The plugin is ready to use. For this plugin, you can now specify a CustomDevice in the
<code class="docutils literal notranslate"><span class="pre">configuration.yaml</span></code> as follows.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">microscopes</span><span class="p">:</span>
<span class="w">    </span><span class="nt">microscope_1</span><span class="p">:</span>
<span class="w">        </span><span class="nt">daq</span><span class="p">:</span>
<span class="w">            </span><span class="nt">hardware</span><span class="p">:</span>
<span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daq</span>
<span class="w">                </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NI</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">        </span><span class="nt">custom_device</span><span class="p">:</span>
<span class="w">            </span><span class="nt">hardware</span><span class="p">:</span>
<span class="w">                </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CustomDevice</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">custom_device</span></code> will be loaded when <strong>navigate</strong> is launched, and it can be
controlled through the GUI.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="intermediate.html" class="btn btn-neutral float-left" title="Write A Smart Acquisition Routine (Intermediate)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="add_new_device.html" class="btn btn-neutral float-right" title="Add a New Hardware Device (Advanced)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Dean Lab, UT Southwestern Medical Center.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>